### 【最終版】リファクタリング計画書 (担当2: UIコンポーネント)

### 概要

`components/` ディレクトリ内のUIコンポーネントは、アプリケーション全体で再利用されるUI部品を担当します。本計画では、コンポーネントの責務を明確化し、再利用性、保守性、テスト容易性を向上させることを目的とします。特に、他の担当者からのロジック分離の計画と連携し、UIコンポーネントが純粋なプレゼンテーショナルコンポーネントとなることを目指します。

### TODOリスト

#### 1. コンポーネントの責務分離と再配置 (全体: 大)

-   [ ] **(重さ: 大)** `components/screens/` ディレクトリを廃止し、その中のコンポーネント（`EventFormScreen`, `PersonFormScreen`）を、より適切な機能別ディレクトリ（例: `components/features/forms/`）に移動する。
    *   **理由:** `screens` は画面全体を指すことが多く、UI部品としての責務が曖昧。`features` ディレクトリの導入と連携し、機能単位でコンポーネントを整理する。
-   [ ] **(重さ: 中)** 汎用的なUI要素を `components/ui/` または `components/common/` に集約し、命名規則を統一する。
    *   **詳細:** `LoadingIndicator`, `ErrorState`, `EmptyState` など、複数の画面で利用されるが特定の機能に紐づかない複合的なUI要素を `components/common/` に配置する。
    *   **詳細:** `IconSymbol`, `SwipeableCard` など、よりプリミティブなUI要素は引き続き `components/ui/` に配置する。
    *   **理由:** コンポーネントの役割を明確にし、再利用性を高める。
-   [ ] **(重さ: 中)** `app/(tabs)/people.tsx` および `app/(tabs)/events.tsx` から切り出されるUI部分を、それぞれ `components/features/people/PeopleList.tsx` および `components/features/events/EventList.tsx` として新規作成する。
    *   **理由:** 画面固有のUIロジックを機能単位でカプセル化し、画面コンポーネントの責務を簡素化する。
-   [ ] **(重さ: 中)** `app/person-detail.tsx` から切り出される人物詳細カードのUIを `components/features/person/PersonDetailCard.tsx` として新規作成する。
    *   **理由:** 同上。

#### 2. フォームコンポーネントの改善 (全体: 中)

-   [ ] **(重さ: 中)** `components/forms/` 内の各フォームコンポーネント（`EventForm`, `PersonForm`, `UserRegistrationForm` など）をレビューし、以下の点を改善する。
    *   **詳細:** `FormInput` などの汎用コンポーネントを最大限に活用し、重複コードを削減する。
    *   **詳細:** バリデーションロジックをフォームコンポーネント内ではなく、フォームライブラリ（React Hook Formなど）やカスタムフックで管理するように徹底する。
    *   **理由:** DRY原則の適用と、フォームロジックの複雑性軽減。
-   [ ] **(重さ: 小)** `TagChip`, `TagInput`, `TagInputWithSuggestions`, `TagSelector` などのタグ関連コンポーネントをレビューし、一貫したAPIとスタイリングを提供できているか確認する。
    *   **理由:** 再利用性と保守性の向上。

#### 3. スタイリングの一貫性強化 (全体: 中)

-   [ ] **(重さ: 中)** 全てのUIコンポーネントの `StyleSheet` 定義を、コンポーネントファイルから `*.styles.ts` ファイルに分離する。
    *   **理由:** コードの可読性向上と、スタイルの再利用性向上。
-   [ ] **(重さ: 中)** `constants/Colors.ts` から `styles/theme.ts` への移行（担当4の計画と連携）後、全てのUIコンポーネントが新しいテーマシステム（`useThemeColor` など）を適切に利用していることを確認する。
    *   **理由:** テーマの一貫性を保ち、ダークモードなどの切り替えに柔軟に対応できるようにする。
-   [ ] **(重さ: 小)** `ThemedText.tsx` と `ThemedView.tsx` の利用状況をレビューし、テーマカラーの適用が適切に行われているか確認する。
    *   **理由:** テーマシステムとの連携を強化。

#### 4. アクセシビリティと国際化 (全体: 小)

-   [ ] **(重さ: 小)** 各UIコンポーネントに、必要に応じてアクセシビリティプロパティ（`accessibilityLabel`, `role` など）を追加する。
    *   **理由:** ユーザー体験の向上。
-   [ ] **(重さ: 小)** 将来的な国際化（i18n）を見据え、ハードコードされた文字列を外部化する準備を検討する。
    *   **理由:** 拡張性の確保。

#### 5. テストの強化 (全体: 中)

-   [ ] **(重さ: 中)** 新しく分離・作成されるUIコンポーネントに対して、単体テスト（Jest/React Native Testing Library）を追加する。
    *   **詳細:** プレゼンテーショナルコンポーネントは、受け取ったpropsに基づいて正しくレンダリングされるか、イベントが正しく発火するかをテストする。
    *   **理由:** 品質保証とリファクタリングの安全性確保。
-   [ ] **(重さ: 小)** 既存のUIコンポーネントのテスト（`__tests__/components/`）をレビューし、カバレッジとテストの質を向上させる。
    *   **理由:** テストの信頼性向上。
