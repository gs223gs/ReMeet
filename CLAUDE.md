あなたは優秀なAIエンジニアです。
README.mdとこのガイドラインを読んで実装をしてください

useEffectは禁止ですフェッチするときはtanstack queryを使用してください
useFocusEffectは禁止ですフェッチする時はtanstack queryを使用してください
# Claude 開発ガイドライン

## 基本ルール

### 言語設定

- 私との会話は必ず**日本語**で会話してください

### プロジェクト要件定義

- **README.md**に記載があります。必ず読んでください

---

## データベース設計

### DB アクセス方針

- 現在は SQLite ですが、今後 Supabase に移行する可能性があります
- DB アクセスについては**ラッパーとして実装**し、直接呼び出すのは控えてください

---

## Git 運用ルール

### コミットメッセージ

- 必ず**日本語**でコミットしてください

#### 禁止事項

以下のようなメッセージは付けないでください：

```
🤖 Generated with [Claude Code](https://claude.ai/code)
Co-Authored-By: Claude <noreply@anthropic.com>
```

### ブランチ戦略

- ブランチは必ず**dev ブランチから派生**させてください

#### ブランチ種類

- **dev**: 開発用ブランチ
- **feature**: 機能追加用ブランチ
- **bugfix**: バグ修正用ブランチ
- **hotfix**: 緊急バグ修正用ブランチ

### PR（プルリクエスト）ルール

1. コーディング前に必ずブランチを作成してください
2. コーディング後は必ず PR を作成してください
3. PR には `npm start --tunnel` を実行した時に出力されてるQRを添付してください
4. PR には必ずコードの説明を書いてください

---

## コーディング規約
useEffectは禁止ですフェッチするときはtanstack queryを使用してください
### 基本方針

- **関数型的**に書いてください
- **副作用を最小限**に抑える
- **型安全を最重視**
- **現場に即した実装**を行う

### クラスについて
- クラスベースは絶対に使用しないでください
### 型安全ルール

- **any は絶対に使わない**
- **強力な型安全**を意識してください
- 型はコンポーネント内に書かず、コンポーネント外に書く

### .map の仕様
- **index の使用は禁止**します
- コンポーネントの map は必ず**key を使用**してください

### コードの可読性

- コードの可読性を高くするために、**コメントを必ず書く**
- 有名な本「リーダブルコード」に則ってコメントを書く

### アーキテクチャ

- **コンポーネントを必ず適切に分割**
  - 目安は1ファイル100行程度が理想です
- **再利用性のある型定義**を書く、もしくは既存を使う
- **ロジックも似たものがないかを探し**、流用できるものがあれば使う
- 流用できるものがなければ**再利用性を高くなるように実装**する

### ディレクトリ構造

- **docs/product.md** にディレクトリ構造の説明が書いてあります
- それを読み、適切な構造を守ってください
- 追加でディレクトリを作成した場合は、必ず **docs/product.md** にディレクトリ構造を更新してください

---

## テスト戦略
useEffectは禁止ですフェッチするときはtanstack queryを使用してください
### TDD の徹底

- **実装する前に必ずテストを書く**

### テスト実装

- コンポーネントやロジックを実装したら**必ずテストを作成**してください
- **AAA パターン**（Arrange, Act, Assert）でテストを作成してください

---

## 禁止事項

### useEffect の使用禁止

- **useEffect を絶対に使用しない**

#### 理由

- 技術的負債になりやすい
- 世間的にも使用は推奨されていない
- React チームも使うべきではないと言っている
- 不要なレンダリングを生みやすい

### Lint・Build・Test チェック

- 必ず最後に **Lint・Build・Test** を行ってください
- 失敗した場合は表面的な解消ではなく、**根本的原因を探して解消**してください

---

## エラー解消手順
useEffectは禁止ですフェッチするときはtanstack queryを使用してください
### 基本手順

1. **原因特定**
2. **対策考案**
3. **対策実施**
4. **解消したら、原因と対策を markdown にまとめる**

### 1. 原因特定

- まずはエラーの**表面的原因**について探してください
- その後、関連するコードを読み、**表面的ではなく根本的原因**を探してください
- エラーの根本的原因がわかったら次のフェーズに入ってください

### 2. 対策考案

根本的原因について対策を考えてください

#### 対策の基準

- 現場で行っているやり方か？
- 中長期的に見たら技術的負債にならないか？

### 3. 対策実施

- 考案した対策を実施してください
- 必ず **Lint と Build と Test** を行ってください
- エラー解消、Lint と Build と Test が通るまで繰り返し行ってください

### 4. ドキュメント化

今回行った最終的なエラー理由と解消方法を markdown にまとめてください

#### 配置場所

```
docs/errors/{月}/{日付}/{error内容(日本語で書く)}
```

---

## まとめ

このガイドラインに従って、品質の高いコードを維持し、チーム開発を円滑に進めてください。
